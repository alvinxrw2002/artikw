<div class="col-md-4 mb-3">
    <div class="card">
      <div class="card-body">
        <div class="d-flex flex-column align-items-center text-center">
          <img src="{{ img.image.url }}" alt="Admin" class="rounded-circle p-1 bg-primary" width="120" height="120">
          <div class="mt-3">
            <h4>{{changes.username}}</h4>
            <p class="text-secondary mb-1">{{changes.email}}</p>
            <p class="text-muted font-size-sm">{{changes.address}}</p>
            <p class="text-donate">Total Donasi: ***</p>
            
          </div>
        </div>
      </div>
    </div>
    
  </div>
  
  <div class="col-md-8">
    <div class="card mb-3">
      <div class="card-body">
        <div class="row">
          <div class="col-sm-3">
            <h6 id="userp" class="mb-0">Full Name</h6>
          </div>
          <div class="col-sm-9 text-secondary">
            {% if changes %}
            {{ changes.username }}
            {% endif %}

          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col-sm-3">
            <h6 id="emailp" class="mb-0">Email</h6>
          </div>
          <div class="col-sm-9 text-secondary">
            {% if changes %}
            {{ changes.email }}
            {% endif %}

          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col-sm-3">
            <h6 id="phonep" class="mb-0">Phone</h6>
          </div>
          <div class="col-sm-9 text-secondary">
            {% if changes %}
            {{ changes.phone }}
            {% endif %}

          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col-sm-3">
            <h6 id="mobilep" class="mb-0">Mobile</h6>
          </div>
          <div class="col-sm-9 text-secondary">
            {% if changes %}
            {{ changes.mobile }}
            {% endif %}

          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col-sm-3">
            <h6 id="addressp" class="mb-0">Address</h6>
          </div>
          <div class="col-sm-9 text-secondary">
            {% if changes %}
            {{ changes.address }}
            {% endif %}

          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col-sm-12">
            <a class="btn btn-info " data-bs-toggle="modal" data-bs-target="#exampleModal">Edit</a>
          </div>
        </div>
      </div>
    </div>

    <div class="row gutters-sm">
      <!--  untuk loop gambar  -->
      {% for images in img2 %}
      <div class="col-sm-6 mb-3">
        <div class="card h-100">
          <div class="card-body">
            <img src="{{ images.gambar.url }}" loading="lazy" alt="" class="progress mb-3" style="height:100%; width: 100%">
            <div class="progress mb-3" style="height: 5px">
            </div>
          </div>
        </div>
      </div>
      
      <!--akhir dari loop -->
      {% endfor %}
    </div>

    <!-- modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <h1 class="modal-title fs-5" id="exampleModalLabel">EDIT PROFILE</h1>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <div class="card">
          <div class="card-body">
              <div class="d-flex flex-column align-items-center text-center">
                  <img src="{{ img.image.url }}" alt="Admin" class="rounded-circle p-1 bg-primary" width="120" height="120">
                  <div class="mt-3">
                      <h4>{{changes.username}}</h4>
                      <p class="text-secondary mb-1">{{changes.email}}</p>
                      <p class="text-muted font-size-sm">{{changes.address}}</p>
                      <form action="edit/addimage/" method="POST" enctype="multipart/form-data">  
                          {% csrf_token %}  
                          {{ form.as_p }}  
                          <button type="submit"  class="btn btn-primary">Add/Change Image</button>
                      </form>  
                    
                      {% if img_obj %}  
                          <h3>Succesfully uploaded : {{ img_obj.caption }}</h3>  
                          <img src="{{ img_obj.image.url}}" alt="connect" style="max-height:300px">  
                      {% endif %}  
                      
                  </div>
              </div>
              
              </ul>
          </div>
      </div>
                <form action="/profileuser/edit/addrecord/" method="POST">
                  {% csrf_token %}
                  
                  <div class="row mb-3">
                      <div class="col-sm-3">
                          <h6 class="mb-0">Full Name</h6>
                      </div>
                      <div class="col-sm-9 text-secondary">
                          <input id="username" type="text" class="form-control" name="username" value="{{changes.username}}">
                      </div>
                  </div>
                  <div class="row mb-3">
                      <div class="col-sm-3">
                          <h6 class="mb-0">Email</h6>
                      </div>
                      <div class="col-sm-9 text-secondary">
                          <input id="email" type="text" class="form-control" name="email" value="{{changes.email}}" >
                      </div>
                  </div>
                  <div class="row mb-3">
                      <div class="col-sm-3">
                          <h6 class="mb-0">Phone</h6>
                      </div>
                      <div class="col-sm-9 text-secondary">
                          <input id="phone" type="text" class="form-control" name="phone" value="{{changes.phone}}">
                      </div>
                  </div>
                  <div class="row mb-3">
                      <div class="col-sm-3">
                          <h6 class="mb-0">Mobile</h6>
                      </div>
                      <div class="col-sm-9 text-secondary">
                          <input id="mobile" type="text" class="form-control" name="mobile" value="{{changes.mobile}}">
                      </div>
                  </div>
                  <div class="row mb-3">
                      <div class="col-sm-3">
                          <h6 class="mb-0">Address</h6>
                      </div>
                      <div class="col-sm-9 text-secondary">
                          <input id="address" type="text" class="form-control" name="address" value="{{changes.address}}">
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-sm-3"></div>
                      <div class="col-sm-9 text-secondary">
                          <input id="save" data-bs-dismiss="modal" type="button" class="btn btn-primary px-4" value="Save Changes" >
                      </div>
                  </div>
                  
              </form>
              </div>
              <div class="modal-footer">
              </div>
          </div>
      </div>
  </div>
  <!-- batas modal -->



  </div>

  <script>
    $(document).ready(function(){
      $("#save").click(function(){
        $.ajax({
          type: "POST",
          url: "/profileuser/edit/addrecord/",
          data: {
            "csrfmiddlewaretoken":"{{csrf_token}}",
            "username": $("#username").val(),
            "email": $("#email").val(),
            "phone": $("#phone").val(),
            "mobile": $("#mobile").val(),
            "address": $("#address").val(),
          }
          
        })
        alert("update success");
        $.ajax({
          type: "GET",
          url: "{% url 'profileuser:show_ajax_profile' %}",
          success: function(data){
            $("#body").html(data)
            // $("#userp").html(data.username);
            // $("#emailp").html(data.email);
            // $("phonep").html(data.phone);
            // $("#mobilep").html(data.mobile);
            // $("#addressp").html(data.address);
          }
        })
  
      })
    })
  </script>