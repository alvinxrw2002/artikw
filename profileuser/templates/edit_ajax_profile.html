<div class="col-md-4 mb-3">
  <div id="kartup" class="card">
    <div id="kartup" class="card-body">
      <div class="d-flex flex-column align-items-center text-center">
        <img src="{{ img.image.url }}" alt="" class="rounded-circle p-1" width="120" height="120">
        <div class="mt-3">
          <h4>{{changes.username}}</h4>
          <p style="color:white">{{changes.email}}</p>
          <p style="color:white">{{changes.address}}</p>
          <p style="color:black" class="text-donate" >Total Donasi: ***</p>
          
        </div>
      </div>
    </div>
  </div>
  
</div>

<div class="col-md-8">
  <div id="cardu" class="card mb-3">
    <div class="card-body">
      <div class="row">
        <div class="col-sm-3">
          <h6 id="userp" class="mb-0">Full Name</h6>
        </div>
        <div class="col-sm-9">
          {% if changes %}
          {{ changes.username }}
          {% endif %}

        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-sm-3">
          <h6 id="emailp" class="mb-0">Email</h6>
        </div>
        <div class="col-sm-9">
          {% if changes %}
          {{ changes.email }}
          {% endif %}

        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-sm-3">
          <h6 id="phonep" class="mb-0">Phone</h6>
        </div>
        <div class="col-sm-9">
          {% if changes %}
          {{ changes.phone }}
          {% endif %}

        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-sm-3">
          <h6 id="mobilep" class="mb-0">Mobile</h6>
        </div>
        <div class="col-sm-9">
          {% if changes %}
          {{ changes.mobile }}
          {% endif %}

        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-sm-3">
          <h6 id="addressp" class="mb-0">Address</h6>
        </div>
        <div class="col-sm-9">
          {% if changes %}
          {{ changes.address }}
          {% endif %}

        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-sm-12">
          <a id="editbutton" class="btn btn-info " data-bs-toggle="modal" data-bs-target="#exampleModal">Edit</a>
        </div>
      </div>
    </div>
  </div>

  <div class="row gutters-sm">
    <!--  untuk loop gambar  -->
    {% for images in img2 %}
    <div class="col-sm-6 mb-3">
      <div id="kartupostan" class="card h-100">
        <div id="kartupostan" class="card-body">
          <img src="{{ images.gambar.url }}" loading="lazy" alt="" class="progress mb-3" style="height:100%; width: 100%">
          <div class="progress mb-3" style="height: 5px">
          </div>
        </div>
      </div>
    </div>
    
    <!--akhir dari loop -->
    {% endfor %}
  </div>

  <!-- modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">EDIT PROFILE</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div id="kartuprofile" class="card">
        <div id="kartu" class="card-body">
            <div class="d-flex flex-column align-items-center text-center">
                <img src="{{ img.image.url }}" alt="" class="rounded-circle p-1" width="120" height="120">
                <div class="mt-3">
                    <h4>{{changes.username}}</h4>
                    <p>{{changes.email}}</p>
                    <p>{{changes.address}}</p>
                    <form action="edit/addimage/" method="POST" enctype="multipart/form-data">  
                        {% csrf_token %}  
                        {{ form.as_p }}  
                        <button id="changeimg" type="submit" class="btn btn-primary">Add/Change Image</button>
                    </form>  
                  
                    {% if img_obj %}  
                        <h3>Succesfully uploaded : {{ img_obj.caption }}</h3>  
                        <img src="{{ img_obj.image.url}}" alt="connect" style="max-height:300px">  
                    {% endif %}  
                    
                </div>
            </div>
            
            </ul>
        </div>
    </div>
              <form id="formodal" action="/profileuser/edit/addrecord/" method="POST">
                {% csrf_token %}
                
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <h6 class="mb-0">Full Name</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                        <input id="username" type="text" class="form-control" name="username" value="{{changes.username}}">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <h6 class="mb-0">Email</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                        <input id="email" type="text" class="form-control" name="email" value="{{changes.email}}" >
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <h6 class="mb-0">Phone</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                        <input id="phone" type="text" class="form-control" name="phone" value="{{changes.phone}}">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <h6 class="mb-0">Mobile</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                        <input id="mobile" type="text" class="form-control" name="mobile" value="{{changes.mobile}}">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <h6 class="mb-0">Address</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                        <input id="address" type="text" class="form-control" name="address" value="{{changes.address}}">
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-3"></div>
                    <div class="col-sm-9 text-secondary">
                        <input id="save" data-bs-dismiss="modal" type="button" class="btn btn-primary px-4" value="Save Changes" >
                    </div>
                </div>
                
            </form>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
<!-- batas modal -->



</div>
  
<style>

#editbutton{
  background-color: #383E56;
  color: white;
}

#kartupostan{
  border-radius: 25px;
  background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
  background-size: 400% 400%;
  animation: gradient 15s ease infinite;
}
@keyframes gradient {
    0% {
        background-position: 0% 50%;
    }
 
    50% {
        background-position: 100% 50%;
    }
 
    100% {
        background-position: 0% 50%;
    }
}

.rounded-circle{
    background-image: url('/static/img/11.jpg');
}

.topnav {
    background-color: #333;
    margin-bottom: 20px;
    overflow: hidden;
    position: sticky;
    top: 0;
    z-index: 1;
}

.topnav a {
    float: left;
    display: block;
    color: #f2f2f2;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
    font-size: 17px;
}

.topnav a:hover {
    background-color: #ddd;
    color: black;
    transition: all .5s ease 0s;
}

.topnav a.active {
    background-color: #04AA6D;
    color: white;
}

.topnav .icon {
    display: none;
}

@media screen and (max-width: 687px) {
    .topnav a:not(:first-child) {
        display: none;
    }

    .topnav a.icon {
        float: right;
        display: block;
    }
}

@media screen and (max-width: 687px) {
    .topnav.responsive {
        position: sticky;
        top: 0;
      }

    .topnav.responsive a.icon {
        position: absolute;
        right: 0;
        top: 0;
    }

    .topnav.responsive a {
        float: none;
        display: block;
        text-align: left;
    }
}

@import url('https://fonts.googleapis.com/css2?family=Asap&display=swap');

#kartuprofile{
  border-radius: 25px;
}

#save{
  background-image: url('/static/img/bg-index.jpg');
}

#changeimg{
  background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
  background-size: 400% 400%;
  animation: gradient 15s ease infinite;
}
@keyframes gradient {
    0% {
        background-position: 0% 50%;
    }
 
    50% {
        background-position: 100% 50%;
    }
 
    100% {
        background-position: 0% 50%;
    }
}

#cardu{
  border-radius: 25px;
  background: linear-gradient(-45deg, purple, #23a6d5, #23d5ab);
  background-size: 400% 400%;
  animation: gradient 15s ease infinite;
  color: white;
}
@keyframes gradient {
    0% {
        background-position: 0% 50%;
    }
 
    50% {
        background-position: 100% 50%;
    }
 
    100% {
        background-position: 0% 50%;
    }
}

#examplemodal{
  color: white;
}

#kartu{
  background-image: url('/static/img/bg-index.jpg');
  border-radius: 25px;
}

#kartup{
  border-radius: 25px;
  background: linear-gradient(-45deg, purple, #23a6d5, #23d5ab);
  background-size: 400% 400%;
  animation: gradient 15s ease infinite;
  color: white;
}
@keyframes gradient {
    0% {
        background-position: 0% 50%;
    }
 
    50% {
        background-position: 100% 50%;
    }
 
    100% {
        background-position: 0% 50%;
    } 
}

#formodal{
  margin-top: 40px;
  border-radius: 25px;
}


.modal-content{
  background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
  background-size: 400% 400%;
  animation: gradient 15s ease infinite;
}
@keyframes gradient {
    0% {
        background-position: 0% 50%;
    }
 
    50% {
        background-position: 100% 50%;
    }
 
    100% {
        background-position: 0% 50%;
    }
}

.warna-body{
  margin-top:0px;
  background-image: url('/static/img/pexels-anni-roenkae-2156881.jpg');
}

body{
  margin-top:20px;
  color: #1a202c;
  text-align: left;
  background-color: black;    
}

.main-body {
    padding: 15px;
    
}
@keyframes gradient {
    0% {
        background-position: 0% 50%;
    }
 
    50% {
        background-position: 100% 50%;
    }
 
    100% {
        background-position: 0% 50%;
    }
}

.card {
    box-shadow: 0 1px 3px 0 rgba(0,0,0,.1), 0 1px 2px 0 rgba(0,0,0,.06);
}

.card {
    position: relative;
    display: flex;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: #fff;
    background-clip: border-box;
    border: 0 solid rgba(0,0,0,.125);
    border-radius: .25rem;
}

.card-body {
    flex: 1 1 auto;
    min-height: 1px;
    padding: 1rem;
}

.gutters-sm {
    margin-right: -8px;
    margin-left: -8px;
}

.gutters-sm>.col, .gutters-sm>[class*=col-] {
    padding-right: 8px;
    padding-left: 8px;
}
.mb-3, .my-3 {
    margin-bottom: 1rem!important;
}

.bg-gray-300 {
    background-color: #e2e8f0;
}
.h-100 {
    height: 100%!important;
}
.shadow-none {
    box-shadow: none!important;
}
p.text-donate{
  padding:3px;
  margin: 5px;
  background-color: greenyellow;
  border-radius: 50px;
}
</style>
    
<script>
  $(document).ready(function(){
    $("#save").click(function(){
      $.ajax({
        type: "POST",
        url: "/profileuser/edit/addrecord/",
        data: {
          "csrfmiddlewaretoken":"{{csrf_token}}",
          "username": $("#username").val(),
          "email": $("#email").val(),
          "phone": $("#phone").val(),
          "mobile": $("#mobile").val(),
          "address": $("#address").val(),
        }
        
      })
      alert("update success");
      $.ajax({
        type: "GET",
        url: "{% url 'profileuser:show_ajax_profile' %}",
        success: function(data){
          $("#body").html(data)
          // $("#userp").html(data.username);
          // $("#emailp").html(data.email);
          // $("phonep").html(data.phone);
          // $("#mobilep").html(data.mobile);
          // $("#addressp").html(data.address);
        }
      })

    })
  })
</script>